<!-- templates/tyres/vehicle_detail.html -->
{% extends 'base.html' %}
{% load seo_tags %}

{% block extra_head %}
{% vehicle_schema vehicle %}
{% endblock %}


{% block title %}{{ vehicle.brand }} {{ vehicle.model }} {{ vehicle.year }} Tyre Size - TyreMaster{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'vehicle_list' %}?category={{ vehicle.category }}">{{ vehicle.get_category_display }}s</a></li>
            <li class="breadcrumb-item"><a href="{% url 'vehicle_list' %}?brand={{ vehicle.brand }}">{{ vehicle.brand }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ vehicle.model }} {{ vehicle.year }}</li>
        </ol>
    </nav>
    
    <!-- Vehicle Header -->
    <div class="row mb-4">
        <div class="col-md-8">
            <h1>{{ vehicle.brand }} {{ vehicle.model }} <span class="text-muted">({{ vehicle.year }})</span></h1>
            <div class="d-flex align-items-center mb-3">
                <span class="badge bg-{% if vehicle.category == 'CAR' %}primary{% elif vehicle.category == 'BIKE' %}success{% else %}warning{% endif %} me-2">
                    {{ vehicle.get_category_display }}
                </span>
                <span><i class="fas fa-calendar-alt me-1"></i> {{ vehicle.year }} Model</span>
            </div>
        </div>
        <div class="col-md-4 text-end">
            <i class="fas fa-{% if vehicle.category == 'CAR' %}car{% elif vehicle.category == 'BIKE' %}motorcycle{% else %}scooter{% endif %} fa-6x text-muted"></i>
        </div>
    </div>
    
    <!-- Tyre Information -->
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0"><i class="fas fa-tire"></i> Tyre Specifications</h4>
                </div>
                <div class="card-body">
                    {% if vehicle.tyres %}
                    <div class="row">
                        <!-- Front Tyre -->
                        <div class="col-md-6">
                            <div class="card border-0 bg-light mb-3">
                                <div class="card-body text-center">
                                    <h5 class="card-title text-primary">
                                        <i class="fas fa-tire fa-rotate-90"></i> Front Tyre
                                    </h5>
                                    {% if vehicle.tyres.tyre_size %}
                                        <div class="tyre-size-display">
                                            {{ vehicle.tyres.tyre_size }}
                                        </div>
                                        <p class="mt-2"><strong>Type:</strong> Same front and rear</p>
                                    {% else %}
                                        {% if vehicle.tyres.front_size %}
                                            <div class="tyre-size-display">
                                                {{ vehicle.tyres.front_size }}
                                            </div>
                                        {% elif vehicle.tyres.front_width %}
                                            <div class="tyre-size-display">
                                                {{ vehicle.tyres.front_width }}/{{ vehicle.tyres.front_aspect_ratio }}-{{ vehicle.tyres.front_rim }}
                                            </div>
                                        {% else %}
                                            <div class="alert alert-warning">
                                                No front tyre data available
                                            </div>
                                        {% endif %}
                                        
                                        {% if vehicle.tyres.front_pressure %}
                                            <p class="mt-2"><strong>Recommended Pressure:</strong> {{ vehicle.tyres.front_pressure }}</p>
                                        {% endif %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Rear Tyre -->
                        <div class="col-md-6">
                            <div class="card border-0 bg-light mb-3">
                                <div class="card-body text-center">
                                    <h5 class="card-title text-danger">
                                        <i class="fas fa-tire"></i> Rear Tyre
                                    </h5>
                                    {% if vehicle.tyres.tyre_size %}
                                        <div class="tyre-size-display">
                                            {{ vehicle.tyres.tyre_size }}
                                        </div>
                                        <p class="mt-2"><strong>Type:</strong> Same front and rear</p>
                                    {% else %}
                                        {% if vehicle.tyres.rear_size %}
                                            <div class="tyre-size-display">
                                                {{ vehicle.tyres.rear_size }}
                                            </div>
                                        {% elif vehicle.tyres.rear_width %}
                                            <div class="tyre-size-display">
                                                {{ vehicle.tyres.rear_width }}/{{ vehicle.tyres.rear_aspect_ratio }}-{{ vehicle.tyres.rear_rim }}
                                            </div>
                                        {% else %}
                                            <div class="alert alert-warning">
                                                No rear tyre data available
                                            </div>
                                        {% endif %}
                                        
                                        {% if vehicle.tyres.rear_pressure %}
                                            <p class="mt-2"><strong>Recommended Pressure:</strong> {{ vehicle.tyres.rear_pressure }}</p>
                                        {% endif %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Detailed Specifications -->
                    <div class="mt-4">
                        <h5>Detailed Specifications</h5>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Parameter</th>
                                        <th>Front Tyre</th>
                                        <th>Rear Tyre</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Tyre Size</td>
                                        <td>{{ vehicle.tyres.get_front_display }}</td>
                                        <td>{{ vehicle.tyres.get_rear_display }}</td>
                                    </tr>
                                    {% if vehicle.tyres.front_width %}
                                    <tr>
                                        <td>Width (mm)</td>
                                        <td>{{ vehicle.tyres.front_width|default:"-" }}</td>
                                        <td>{{ vehicle.tyres.rear_width|default:"-" }}</td>
                                    </tr>
                                    <tr>
                                        <td>Aspect Ratio (%)</td>
                                        <td>{{ vehicle.tyres.front_aspect_ratio|default:"-" }}</td>
                                        <td>{{ vehicle.tyres.rear_aspect_ratio|default:"-" }}</td>
                                    </tr>
                                    <tr>
                                        <td>Rim Diameter (inches)</td>
                                        <td>{{ vehicle.tyres.front_rim|default:"-" }}</td>
                                        <td>{{ vehicle.tyres.rear_rim|default:"-" }}</td>
                                    </tr>
                                    {% endif %}
                                    <tr>
                                        <td>Recommended Pressure</td>
                                        <td>{{ vehicle.tyres.front_pressure|default:"Not specified" }}</td>
                                        <td>{{ vehicle.tyres.rear_pressure|default:"Not specified" }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    {% if vehicle.tyres.notes %}
                    <div class="alert alert-info mt-3">
                        <h6><i class="fas fa-info-circle"></i> Notes</h6>
                        <p class="mb-0">{{ vehicle.tyres.notes }}</p>
                    </div>
                    {% endif %}
                    
                    {% else %}
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        No tyre information available for this vehicle.
                    </div>
                    {% endif %}

                    {% if vehicle.tyres.alt_size_1 or vehicle.tyres.alt_size_2 %}
                        <div class="card mt-4">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="mb-0"><i class="fas fa-exchange-alt"></i> Alternative Sizes</h5>
                            </div>
                            <div class="card-body">
                                <p class="text-muted">These alternative sizes may also fit your vehicle:</p>
                                <div class="row">
                                    {% if vehicle.tyres.alt_size_1 %}
                                    <div class="col-md-4">
                                        <div class="card border-warning">
                                            <div class="card-body text-center">
                                                <h5>{{ vehicle.tyres.alt_size_1 }}</h5>
                                                <small class="text-muted">Alternative 1</small>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                    {% if vehicle.tyres.alt_size_2 %}
                                    <div class="col-md-4">
                                        <div class="card border-warning">
                                            <div class="card-body text-center">
                                                <h5>{{ vehicle.tyres.alt_size_2 }}</h5>
                                                <small class="text-muted">Alternative 2</small>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                    {% if vehicle.tyres.alt_size_3 %}
                                    <div class="col-md-4">
                                        <div class="card border-warning">
                                            <div class="card-body text-center">
                                                <h5>{{ vehicle.tyres.alt_size_3 }}</h5>
                                                <small class="text-muted">Alternative 3</small>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                                
                                <div class="alert alert-info mt-3">
                                    <small>
                                        <i class="fas fa-info-circle"></i>
                                        Alternative sizes are for reference only. Always consult with a tyre professional before changing tyre sizes.
                                    </small>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        <!-- Pressure Chart Link -->
                        <div class="card mt-4">
                            <div class="card-body">
                                <h5><i class="fas fa-chart-line"></i> Tyre Pressure Guide</h5>
                                <p>See detailed pressure charts for different conditions:</p>
                                <a href="{% url 'pressure_chart' vehicle.slug %}" class="btn btn-outline-primary">
                                    View Pressure Chart <i class="fas fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    
                    <!-- Important Notice -->
                    <div class="alert alert-secondary mt-4">
                        <small>
                            <strong><i class="fas fa-exclamation-circle"></i> Disclaimer:</strong>
                            These tyre specifications are for reference only. Always refer to your vehicle's owner manual 
                            or consult with a professional tyre service provider for accurate specifications.
                        </small>
                    </div>
                </div>
            </div>
            
            <!-- Share/Save -->
            <div class="card mt-4">
                <div class="card-body">
                    <h6><i class="fas fa-share-alt"></i> Share This Information</h6>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary">
                            <i class="fas fa-link"></i> Copy Link
                        </button>
                        <button type="button" class="btn btn-outline-success">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button type="button" class="btn btn-outline-info">
                            <i class="fas fa-download"></i> Save as PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sidebar -->
        <div class="col-md-4">
            <!-- In vehicle_detail.html sidebar -->
            <div class="card mt-4">
                <div class="card-body">
                    <h6><i class="fas fa-chart-line"></i> Advanced Tools</h6>
                    <div class="d-grid gap-2">
                        <a href="{% url 'pressure_chart' vehicle.slug %}" class="btn btn-outline-primary">
                            <i class="fas fa-chart-bar"></i> Pressure Chart
                        </a>
                        <!-- Other buttons... -->
                    </div>
                </div>
            </div>
            <!-- Similar Vehicles -->
            {% if similar_vehicles %}
            <div class="card mb-4">
                <div class="card-header bg-secondary text-white">
                    <h6 class="mb-0"><i class="fas fa-car-side"></i> Similar Vehicles</h6>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        {% for similar in similar_vehicles %}
                        <a href="{% url 'vehicle_detail' similar.slug %}" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1">{{ similar.brand }} {{ similar.model }}</h6>
                                <small>{{ similar.year }}</small>
                            </div>
                            <small class="text-muted">
                                {% if similar.tyres %}
                                    {% if similar.tyres.tyre_size %}
                                        Tyre: {{ similar.tyres.tyre_size }}
                                    {% else %}
                                        F: {{ similar.tyres.get_front_display }}, R: {{ similar.tyres.get_rear_display }}
                                    {% endif %}
                                {% endif %}
                            </small>
                        </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}
            <div class="card mt-4">
                <div class="card-body text-center">
                    <small class="text-muted">Advertisement</small>
                    <!-- Ad slot 1 -->
                    <ins class="adsbygoogle"
                        style="display:block"
                        data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
                        data-ad-slot="1234567890"
                        data-ad-format="auto"
                        data-full-width-responsive="true"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
            </div>
            
            
            <!-- Quick Actions -->
            <div class="card mb-4">
                <div class="card-body">
                    <h6><i class="fas fa-bolt"></i> Quick Actions</h6>
                    <div class="d-grid gap-2">
                        <a href="{% url 'search_by_tyre' %}?front={{ vehicle.tyres.get_front_display }}" class="btn btn-outline-primary">
                            <i class="fas fa-search"></i> Find vehicles with same front tyre
                        </a>
                        <a href="{% url 'search_by_tyre' %}?rear={{ vehicle.tyres.get_rear_display }}" class="btn btn-outline-primary">
                            <i class="fas fa-search"></i> Find vehicles with same rear tyre
                        </a>
                        <a href="{% url 'vehicle_list' %}?brand={{ vehicle.brand }}" class="btn btn-outline-secondary">
                            <i class="fas fa-list"></i> View all {{ vehicle.brand }} vehicles
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- SEO Information -->
            <div class="card">
                <div class="card-body">
                    <h6><i class="fas fa-tags"></i> Related Keywords</h6>
                    <div class="d-flex flex-wrap gap-1">
                        <span class="badge bg-light text-dark border">{{ vehicle.brand }} tyre size</span>
                        <span class="badge bg-light text-dark border">{{ vehicle.model }} tyre pressure</span>
                        <span class="badge bg-light text-dark border">{{ vehicle.year }} tyre specifications</span>
                        <span class="badge bg-light text-dark border">front rear tyre difference</span>
                        <span class="badge bg-light text-dark border">{{ vehicle.get_category_display }} tyre guide</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Copy link functionality
    document.querySelector('.btn-outline-primary').addEventListener('click', function() {
        navigator.clipboard.writeText(window.location.href).then(() => {
            alert('Link copied to clipboard!');
        });
    });
    
    // Print functionality
    document.querySelectorAll('.btn-outline-success')[0].addEventListener('click', function() {
        window.print();
    });
});
</script>
{% endblock %}